<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>æ ¼è¨€åç´BOX | rememberbox.html</title>
  <style>
    :root{
      --bg:#0b1023; --panel:#0f172a; --card:#111827; --text:#e5e7eb; --muted:#9ca3b8;
      --book:#60a5fa; /* æ›¸ç± */
      --paper:#34d399; /* æ–°è */
      --news:#fbbf24; /* ãƒ‹ãƒ¥ãƒ¼ã‚¹ */
      --other:#a78bfa; /* ãã®ä»– */
      --accent:#22d3ee;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:radial-gradient(1200px 800px at 10% -10%, rgba(34,211,238,.10), transparent 40%),radial-gradient(1000px 600px at 100% 0, rgba(167,139,250,.10), transparent 40%),var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Hiragino Sans","Noto Sans JP","Yu Gothic UI",sans-serif}
    header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,rgba(11,23,42,.95),rgba(11,23,42,.6) 60%,rgba(11,23,42,0));backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,.06)}
    header .wrap{max-width:920px;margin:0 auto;padding:14px 16px}
    h1{margin:0;font-size:clamp(20px,3.5vw,26px)}
    .sub{color:var(--muted);font-size:12px}
    main{max-width:920px;margin:0 auto;padding:14px 16px;display:flex;flex-direction:column;gap:12px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.1);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .form{padding:12px}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:nowrap}
    @media (max-width:560px){ .row{flex-wrap:nowrap} }
    .row > *{flex:0 0 auto}
    input[type="date"], select, textarea{background:#0b1220;color:var(--text);border:1px solid rgba(255,255,255,.15);border-radius:10px;padding:10px 12px}
    input[type="date"]{width:150px}
    select{width:160px}
    textarea{width:100%;min-height:80px;resize:vertical}
    .btn{appearance:none;border:1px solid rgba(255,255,255,.2);background:#0d1b2a;color:var(--text);padding:10px 12px;border-radius:10px;cursor:pointer}
    .btn:hover{background:#12233b}
    .btn:active{transform:translateY(1px)}
    .list{display:flex;flex-direction:column;gap:10px;padding:12px}
    .item{padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);display:grid;grid-template-columns:auto 1fr auto;gap:10px}
    .date{color:var(--muted);font-size:12px}
    .genre{font-weight:700}
    .text{white-space:pre-wrap;line-height:1.6}
    .actions{display:flex;gap:6px}
    .chip{font-size:12px;padding:3px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06)}
    .empty{color:var(--muted);padding:14px}
    .hint{color:var(--muted);font-size:12px;padding:0 12px 12px}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>æ ¼è¨€åç´BOX <span class="sub">â€” è¦šãˆã¦ãŠããŸã„è¨€è‘‰ã‚’æ—¥ä»˜ãƒ»ã‚¸ãƒ£ãƒ³ãƒ«ä»˜ãã§è¨˜éŒ²</span></h1>
    </div>
  </header>

  <main>
    <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆå·¦â†’å³ã«ã€Œæ—¥ä»˜ã€ã€Œã‚¸ãƒ£ãƒ³ãƒ«ã€ã€Œå†…å®¹ã€ã€ä¸‹ã«ç™»éŒ²ãƒœã‚¿ãƒ³ï¼‰ -->
    <section class="card form">
      <div class="row" style="margin-bottom:8px">
        <input id="fDate" type="date" />
        <select id="fGenre" aria-label="ã‚¸ãƒ£ãƒ³ãƒ«">
          <option value="æ›¸ç±">æ›¸ç±</option>
          <option value="æ–°è">æ–°è</option>
          <option value="ãƒ‹ãƒ¥ãƒ¼ã‚¹">ãƒ‹ãƒ¥ãƒ¼ã‚¹</option>
          <option value="ãã®ä»–">ãã®ä»–</option>
        </select>
        <textarea id="fText" placeholder="è¦šãˆã¦ãŠããŸã„ãƒ•ãƒ¬ãƒ¼ã‚ºãƒ»è€ƒãˆæ–¹ãƒ»å¼•ç”¨ãªã©ï¼ˆè¤‡æ•°è¡ŒOKï¼‰"></textarea>
        <button id="btnAdd" class="btn">ï¼‹ è¿½åŠ </button>
      </div>
      <div class="hint">â€» å·¦ã‹ã‚‰å³ã«ã€Œæ—¥ä»˜ â†’ ã‚¸ãƒ£ãƒ³ãƒ« â†’ å†…å®¹ã€ã€‚ä¸Šã‹ã‚‰ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ä½¿ã„ã¾ã™ã€‚</div>
    </section>

    <!-- ä¸€è¦§ -->
    <section class="card">
      <div class="list" id="list"></div>
    </section>
  </main>

  <script>
    // ====== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ======
    const $ = s => document.querySelector(s);
    const fmt = (d)=>{
      const t = new Date(d);
      const y=t.getFullYear(), m=String(t.getMonth()+1).padStart(2,'0'), da=String(t.getDate()).padStart(2,'0');
      return `${y}-${m}-${da}`;
    };
    const GENRE_COLOR = {
      "æ›¸ç±":"var(--book)",
      "æ–°è":"var(--paper)",
      "ãƒ‹ãƒ¥ãƒ¼ã‚¹":"var(--news)",
      "ãã®ä»–":"var(--other)"
    };

    // ====== ä¿å­˜ï¼ˆlocalStorageï¼‰ ======
    const KEY = "rememberbox.entries.v1";
    function load(){ try{ return JSON.parse(localStorage.getItem(KEY)||"[]"); }catch(e){ return []; } }
    function save(arr){ localStorage.setItem(KEY, JSON.stringify(arr)); }

    // ====== çŠ¶æ…‹ ======
    let items = load(); // {id,date,genre,text,createdAt}

    // ====== åˆæœŸåŒ– ======
    $('#fDate').value = fmt(new Date());
    $('#fText').value = "";

    // ====== è¿½åŠ å‡¦ç† ======
    function addItem(){
      const date = $('#fDate').value || fmt(new Date());
      const genre = $('#fGenre').value;
      const text = $('#fText').value.trim();
      if(!text){ $('#fText').focus(); return; }
      const id = Date.now().toString(36)+Math.random().toString(36).slice(2,7);
      items.push({ id, date, genre, text, createdAt: Date.now() });
      save(items);
      $('#fText').value = "";
      render();
      // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¯ãã®ã¾ã¾ï¼ˆä¸Šã‹ã‚‰ä¸‹ã¸ç©ã‚€ï¼‰
    }

    // ====== å‰Šé™¤ ======
    function removeItem(id){
      items = items.filter(x=>x.id!==id);
      save(items);
      render();
    }

    // ====== ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° ======
    function render(){
      const wrap = $('#list');
      wrap.innerHTML = "";
      if(items.length===0){
        const empty = document.createElement('div');
        empty.className = "empty";
        empty.textContent = "ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰è¿½åŠ ã—ã¦ãã ã•ã„ã€‚";
        wrap.appendChild(empty);
        return;
      }
      // è¿½åŠ é †ï¼ˆä¸Šâ†’ä¸‹ï¼‰ã§è¡¨ç¤ºã€‚æœ€æ–°ã‚’ã„ã¡ã°ã‚“ä¸‹ã«ç©ã‚€ä»•æ§˜ã€‚
      items.forEach(it=>{
        const row = document.createElement('div');
        row.className = "item";
        const genreColor = GENRE_COLOR[it.genre] || "var(--other)";
        row.innerHTML = `
          <div class="genre" style="color:${genreColor}">${it.genre}</div>
          <div class="text">${escapeHtml(it.text)}</div>
          <div class="actions">
            <button class="btn" data-id="${it.id}" title="å‰Šé™¤">âœ•</button>
          </div>
          <div class="date">ğŸ“… ${it.date}</div>
          <div></div>
          <div></div>
        `;
        row.querySelector('button').onclick = ()=> removeItem(it.id);
        wrap.appendChild(row);
      });
    }

    function escapeHtml(s){
      return s.replace(/[&<>'"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
    }

    // ====== ã‚¤ãƒ™ãƒ³ãƒˆ ======
    $('#btnAdd').addEventListener('click', addItem);
    $('#fText').addEventListener('keydown', (e)=>{
      if((e.metaKey||e.ctrlKey) && e.key==='Enter'){ addItem(); }
    });

    // åˆå›æç”»
    render();
  </script>
</body>
</html>
